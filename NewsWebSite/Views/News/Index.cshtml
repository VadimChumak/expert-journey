@using NewsWebSite.Models.ViewModel
@model ArticleListModel
@{
    Layout = "~/Views/Shared/Lay.cshtml";
}
<articlelist id="dataArticleList" data-pagecnt="@Model.ArticleList.PageCount" data-showbytags="@Model.Type" data-lastid="@(Model.ArticleList.Count > 0 ? Model.ArticleList[Model.ArticleList.Count - 1].Id : 0)">
    <div class="row" id="news_panel">
        <div id="grid">
            @foreach (var a in Model.ArticleList)
            {
                <div class="col l6 m6 s12 grid-item">
                    <div class="card hoverable" style="padding:5px;">
                        @if (a.Image != "Empty")
                        {
                            <div class="card-image waves-effect waves-block waves-light">
                                <a id="Title-@a" href="@Url.Action("Article", new { Title = a.Title, Id = a.Id })">
                                    <img class="activator" src="@Url.Content("~/Content/ArticlImages/")@a.Id/@a.Image" style="max-height:250px; min-height:250px; object-fit:cover; object-position:center">
                                </a>
                            </div>
                        }
                        <div class="card-content">
                            <span class="card-title activator grey-text text-darken-4 truncate">@a.Title<i class="material-icons right">more_vert</i></span>
                            <p><a href="@Url.Action("Article", new { Title = a.Title, Id = a.Id })" id="More-@a.Id">Подробнее</a></p>
                        </div>
                        <div class="card-reveal">
                            <span class="card-title grey-text text-darken-4 truncate">@a.Title<i class="material-icons right">close</i></span>
                            <p>@Html.Raw(a.ShortDescription)</p>
                            <div class="divider"></div>
                            <p title="@a.CreateDate">@a.LastUpdateDate.ToString("yyyy-MM-dd H:mm:ss")</p>
                        </div>
                    </div>
                </div>
            }
        </div>
    </div>
</articlelist>

@section scripts {

    @Scripts.Render("https://unpkg.com/masonry-layout@4/dist/masonry.pkgd.min.js")
    @Scripts.Render("~/Scripts/NewsIndex.js")
    <script type="text/template" id="imageTempl">
        <div class="card-image waves-effect waves-block waves-light">
            <a id="Title-[Id]" href="@Url.Action("Article")/[Id]">
                <img class="activator" src="@Url.Content("~/Content/ArticlImages")/[Id]/[Image]" style="max-height:250px;min-height:250px; object-fit:cover; object-position:center">
            </a>
        </div>
    </script>

    <script type="text/template" id="template">
        <div class="col l6  m6  s12 grid-item">
            <div class="card hoverable" style="padding:5px;">
                [ImagePlaceholder]

                <div class="card-content">
                    <span class="card-title activator grey-text text-darken-4 truncate">[Title]<i class="material-icons right">more_vert</i></span>
                    <p><a href="@Url.Action("Article")/[Id]" id="More-[Id]">Подробнее</a></p>
                </div>
                <div class="card-reveal">
                    <span class="card-title grey-text text-darken-4 truncate">[Title]<i class="material-icons right">close</i></span>
                    <p>[ShortDescription]</p>
                    <div class="divider"></div>
                    <p>[Date]</p>
                </div>
            </div>
        </div>
    </script>
}
